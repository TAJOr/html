(function(){"use strict";var j={76940:function(l,d,v){v.r(d),d.default="1.22.1"}},x={};function w(l){var d=x[l];if(d!==void 0)return d.exports;var v=x[l]={exports:{}};return j[l](v,v.exports,w),v.exports}(function(){w.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})}})(),function(){if(typeof w<"u"){var l=w.u,d=w.e,v=new Map,E=new Map;w.u=function(c){var m=l(c);return m+(v.has(c)?"?"+v.get(c):"")},w.e=function(c){var m=d(c);return m.catch(function(g){var y=E.has(c)?E.get(c):2;if(y<1){var h=l(c);throw g.message="Loading chunk "+c+` failed after 2 retries.
(`+h+")",g.request=h,g}return new Promise(function(p){setTimeout(function(){var T=2-y+1,L="&retry-attempt="+T,_="cache-bust=true"+L;v.set(c,_),E.set(c,y-1),p(w.e(c))},0)})})}}}();var X={};(function(){function l(){const{default:t}=w(76940);return t}var d,v,E,c,m=function(t,e){return{name:t,value:e===void 0?-1:e,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},g=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if(t==="first-input"&&!("PerformanceEventTiming"in self))return;var i=new PerformanceObserver(function(a){return a.getEntries().map(e)});return i.observe({type:t,buffered:!0}),i}}catch{}},y=function(t,e){var i=function a(n){n.type!=="pagehide"&&document.visibilityState!=="hidden"||(t(n),e&&(removeEventListener("visibilitychange",a,!0),removeEventListener("pagehide",a,!0)))};addEventListener("visibilitychange",i,!0),addEventListener("pagehide",i,!0)},h=function(t){addEventListener("pageshow",function(e){e.persisted&&t(e)},!0)},p=function(t,e,i){var a;return function(n){e.value>=0&&(n||i)&&(e.delta=e.value-(a||0),(e.delta||a===void 0)&&(a=e.value,t(e)))}},T=-1,L=function(){return document.visibilityState==="hidden"?0:1/0},_=function(){y(function(t){var e=t.timeStamp;T=e},!0)},C=function(){return T<0&&(T=L(),_(),h(function(){setTimeout(function(){T=L(),_()},0)})),{get firstHiddenTime(){return T}}},A=function(t,e){var i,a=C(),n=m("FCP"),o=function(s){s.name==="first-contentful-paint"&&(u&&u.disconnect(),s.startTime<a.firstHiddenTime&&(n.value=s.startTime,n.entries.push(s),i(!0)))},r=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],u=r?null:g("paint",o);(r||u)&&(i=p(t,n,e),r&&o(r),h(function(s){n=m("FCP"),i=p(t,n,e),requestAnimationFrame(function(){requestAnimationFrame(function(){n.value=performance.now()-s.timeStamp,i(!0)})})}))},D=!1,F=-1,N=function(t,e){D||(A(function(f){F=f.value}),D=!0);var i,a=function(f){F>-1&&t(f)},n=m("CLS",0),o=0,r=[],u=function(f){if(!f.hadRecentInput){var Q=r[0],W=r[r.length-1];o&&f.startTime-W.startTime<1e3&&f.startTime-Q.startTime<5e3?(o+=f.value,r.push(f)):(o=f.value,r=[f]),o>n.value&&(n.value=o,n.entries=r,i())}},s=g("layout-shift",u);s&&(i=p(a,n,e),y(function(){s.takeRecords().map(u),i(!0)}),h(function(){o=0,F=-1,n=m("CLS",0),i=p(a,n,e)}))},b={passive:!0,capture:!0},k=new Date,V=function(t,e){d||(d=e,v=t,E=new Date,M(removeEventListener),O())},O=function(){if(v>=0&&v<E-k){var t={entryType:"first-input",name:d.type,target:d.target,cancelable:d.cancelable,startTime:d.timeStamp,processingStart:d.timeStamp+v};c.forEach(function(e){e(t)}),c=[]}},U=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;t.type=="pointerdown"?function(i,a){var n=function(){V(i,a),r()},o=function(){r()},r=function(){removeEventListener("pointerup",n,b),removeEventListener("pointercancel",o,b)};addEventListener("pointerup",n,b),addEventListener("pointercancel",o,b)}(e,t):V(e,t)}},M=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,U,b)})},$=function(t,e){var i,a=C(),n=m("FID"),o=function(u){u.startTime<a.firstHiddenTime&&(n.value=u.processingStart-u.startTime,n.entries.push(u),i(!0))},r=g("first-input",o);i=p(t,n,e),r&&y(function(){r.takeRecords().map(o),r.disconnect()},!0),r&&h(function(){var u;n=m("FID"),i=p(t,n,e),c=[],v=-1,d=null,M(addEventListener),u=o,c.push(u),O()})},B={},J=function(t,e){var i,a=C(),n=m("LCP"),o=function(s){var f=s.startTime;f<a.firstHiddenTime&&(n.value=f,n.entries.push(s),i())},r=g("largest-contentful-paint",o);if(r){i=p(t,n,e);var u=function(){B[n.id]||(r.takeRecords().map(o),r.disconnect(),B[n.id]=!0,i(!0))};["keydown","click"].forEach(function(s){addEventListener(s,u,{once:!0,capture:!0})}),y(u,!0),h(function(s){n=m("LCP"),i=p(t,n,e),requestAnimationFrame(function(){requestAnimationFrame(function(){n.value=performance.now()-s.timeStamp,B[n.id]=!0,i(!0)})})})}},z=function(t){var e,i=m("TTFB");e=function(){try{var a=performance.getEntriesByType("navigation")[0]||function(){var n=performance.timing,o={entryType:"navigation",startTime:0};for(var r in n)r!=="navigationStart"&&r!=="toJSON"&&(o[r]=Math.max(n[r]-n.navigationStart,0));return o}();if(i.value=i.delta=a.responseStart,i.value<0||i.value>performance.now())return;i.entries=[a],t(i)}catch{}},document.readyState==="complete"?setTimeout(e,0):addEventListener("load",function(){return setTimeout(e,0)})},R,q,H;const P={appVersion:(R=window.context.appVersion)!=null?R:"latest",chessboardVersion:(q=window.context.chessboardVersion)!=null?q:l(),cumulativeLayoutShift:0,domLoaded:0,environment:"prod",firstContentfulPaint:0,firstInputDelay:0,largestContentfulPaint:0,timeToFirstByte:0,url:window.context.route||`${window.location.origin}${window.location.pathname}`,userAgent:window.navigator.userAgent,userUuid:(H=window.context.user)==null?void 0:H.uuid,windowLoaded:0},S=t=>e=>{P[t]=e.value};N(S("cumulativeLayoutShift")),A(S("firstContentfulPaint")),$(S("firstInputDelay")),J(S("largestContentfulPaint")),z(S("timeToFirstByte"));function K(){var t,e;const{domContentLoadedEventEnd:i=0,domContentLoadedEventStart:a=0,loadEventEnd:n=0,loadEventStart:o=0}=(e=(t=window.performance.getEntriesByType("navigation"))==null?void 0:t[0])!=null?e:{};P.domLoaded=i-a,P.windowLoaded=n-o;const r=Object.entries(P).reduce((u,[s,f])=>(f&&(u[s]=f.toString()),u),{});r.appVersion==="latest"&&delete r.appVersion,window.navigator.sendBeacon("https://client-metrics.chess.com/core-web-vitals",new URLSearchParams(r))}K()})()})();
